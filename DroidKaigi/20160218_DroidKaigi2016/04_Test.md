# 僕がテスト書け書けおじさんになった経緯とその過程でやったこと
@yuyakaido

## テストがないとどう辛いのか

* 膨大なテストケースの人力確認
	* Couplesは機能が多い
	* 50p以上のGoogleSpreadSheet
	* 人力でないとダメなテストはある
	* 自動化できるところはある
* 影響範囲の考慮ミス
	* 
* テストケースに依存関係
	* テストAをやってからテストBをやらなければならない…

機会損失につながる

## テスト方針
* UIはコスト高い
* まずは変更の少ないバックエンド

> テストが書けない…



## Couplesの設計
### 決断
* 既存
	* 依存関係が複雑
	* テストが無い状態は怖い
* 新しい
	* キレイな設計からできる
	* 徐々に乗り換えて行く




## テスタビリティの高い設計
* 各層の役割を明確化
	* 適切なモジュール化
* CIサーバーで継続的なテスト

バックエンド

* DB↔Database
	* ActiveAndroid
* NetWork
	* Retrofit + OkHttp
* Model
	* RxJava

フロントエンド

* MVC
* MVP
	* 責務の分離
	* Activity/Fragment = V
	* Presenter = P
	* ドキュメントが増える
	* クラスが増える

## テスト手法
* ユニットテスト
	* JUnit4
* UIテスト
	* Espresso
	* Robolectric   
	UIのテストもかける

## サンプル実装
* TestSubscriber
	* RxJavaのテスト書くときに便利
* MockWebServer
	* Square
* Mockito
	
	
## テスト文化をつくるために
* テスト勉強会
* 環境があっても上記がないと続かない

## さいごに
* テストは手段
* 楽をしたい
* エンジニアは怠惰であれ
* 自動化したことで時間が作れれば、有益なものになる。
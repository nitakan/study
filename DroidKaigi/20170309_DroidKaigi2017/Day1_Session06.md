# Day1_Session06

## Session Info
* Title
変更に強いEspressoテストコードを効率良く書こう

* Place
room4

* Speaker
@sumio_tym

## Description
■対象者
・Espressoに興味は有りつつも、取り組む時間がなくて実行に移せていない方
・効率的に、メンテナンス性の高いEspressoテストコードを書きたい方

■概要
AndroidのUIテストツールであるEspressoは、
Android Studio 2.2から導入されたEspresso Test Recorderによって、テストを書く敷居が大きく下がりました。

しかしながら、単純にEspresso Test Recorderに頼ってテストを量産すると、
重複したコードが多数出現してしまい、画面仕様が変更された時に手が付けられなくなってしまいます。

このようなメンテナンス性の問題を解決するためには、量産したテストコードを適切に共通化する必要がありますが、
量産してしまったコードを後から共通化するのも骨が折れる作業です。

このセッションでは、業務でテストの書き方を支援している自身の経験にもとづいて、
効率的にテストコードを生成できるEspresso Test Recroderの利点を活かしつつも、
メンテナンス性を損わないテストコードを書く方法について、
ライブコーディングを交じえながら解説します。

主に、以下のような内容を考えています。

- Espressoテストコードの基本
- Espresso Test Recorderの限界を理解して、うまくテスト自動化対象を選定する方法
- Espresso Test Recorderで何を記録すべきか
- 記録したテストコードを元に、メンテナンス性を損なわずにテストを量産する方法
  (Android Studioのリファクタ機能を活用します)

個々の要素は基本的なことではありますが、
「どのように組み合わせるとうまくいくのか」という知見を皆さんと共有することで
「テストを書いてみよう」と思って下さる方が増えるような内容にしたいと考えています。

## Memo
* テスト
    * 効率の良いテスト
    楽して成果を得る（効率的に）
    捜査対象の特定？
    Espresso Test Recorder
    得意/不得意を知ること
    得意なところから始める

    * 変更に強いテスト
    仕様変更が発生したときに変更が少ない
    PageObjectデザインパターン
    Recorderで出力されたテストコードを修正する必要

* Espresso
    * 不得意なこと
        Viewのプロパティをとってくる
        AsyncTask以外の非同期
        操作・確認対象が明確でない

* Espresso Test Recorder
    * 確認手段が少ない
    * Undo不可
    * landscape非対応

* Espresso-Commons
